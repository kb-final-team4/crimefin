<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sql.banking.mapper">
	<!--거래내역 등록-->
	<insert id="insertBanking" parameterType="bankingVO">
		INSERT INTO banking
		(banking_id,
		 member_id,
		 account_id,
		 banking_date,
		 deposit,
		 deposit_name,
		 withdrawal,
		 withdrawal_to)
		VALUES
			(#{bankingId}, #{memberId}, #{accountId}, sysdate, #{deposit}, #{depositName}, #{withdrawal}, #{withdrawalTo})
	</insert>

	<!--거래내역 조회-->
	<select id="getBanking" parameterType="hashmap" resultType="bankingVO">
		SELECT b.banking_date, b.deposit, b.deposit_name, b.withdrawal,b.withdrawal_to, b.balance
		FROM ACCOUNT a JOIN BANKING b ON a.member_id = b.member_id
		WHERE  b.account_num = #{accountNum}
		  AND (b.BANKING_DATE BETWEEN TO_DATE(#{startDate},'YY/MM/DD') AND TO_DATE(#{endDate},'YY/MM/DD') + 0.99999)
	</select>

</mapper>